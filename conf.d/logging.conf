# Custom log format with extensive details
log_format detailed '$remote_addr - $remote_user [$time_local] '
                   '"$request" $status $body_bytes_sent '
                   '"$http_referer" "$http_user_agent" '
                   'rt=$request_time '
                   'uct="$upstream_connect_time" '
                   'uht="$upstream_header_time" '
                   'urt="$upstream_response_time" '
                   'upstream=$upstream_addr '
                   'host=$host '
                   'server_name=$server_name '
                   'scheme=$scheme '
                   'request_length=$request_length '
                   'bytes_sent=$bytes_sent '
                   'connection=$connection '
                   'connection_requests=$connection_requests '
                   'ssl_protocol=$ssl_protocol '
                   'ssl_cipher=$ssl_cipher';

# JSON format for easier parsing
log_format json_detailed escape=json '{'
    '"timestamp":"$time_iso8601",'
    '"remote_addr":"$remote_addr",'
    '"remote_user":"$remote_user",'
    '"request":"$request",'
    '"request_method":"$request_method",'
    '"request_uri":"$request_uri",'
    '"server_protocol":"$server_protocol",'
    '"status":$status,'
    '"body_bytes_sent":$body_bytes_sent,'
    '"http_referer":"$http_referer",'
    '"http_user_agent":"$http_user_agent",'
    '"http_x_forwarded_for":"$http_x_forwarded_for",'
    '"host":"$host",'
    '"server_name":"$server_name",'
    '"scheme":"$scheme",'
    '"request_time":$request_time,'
    '"upstream_addr":"$upstream_addr",'
    '"upstream_status":"$upstream_status",'
    '"upstream_response_time":"$upstream_response_time",'
    '"upstream_connect_time":"$upstream_connect_time",'
    '"upstream_header_time":"$upstream_header_time",'
    '"ssl_protocol":"$ssl_protocol",'
    '"ssl_cipher":"$ssl_cipher",'
    '"connection":$connection,'
    '"connection_requests":$connection_requests,'
    '"request_length":$request_length,'
    '"bytes_sent":$bytes_sent'
'}';
